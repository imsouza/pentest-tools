import requests
import re

to_crawl = ['http://target.com']
crawled = set()

phones_found = set()

header = {'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) '
                        'AppleWebKit/537.36 (KHTML, like Gecko) '
                        'Chrome/51.0.2704.106 Safari/537.36 OPR/38.0.2220.41'}

while True:
  url = to_crawl[0]
  try:
    req = requests.get(url, header=headers)
  except:
    to_crawl.remove(url)
    crawled.add(url)
    continue

  html = req.text
  links = re.findall(r'<a href="?\'?(https?:\/\/[^"\'>]*)', html)
  print '[*] Crawling:', url

  phones = re.findall(r'^\([1-9]{2}\) (?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$', html)

  to_crawl.remove(url)
  crawled.add(url)

  for link in links:
    if link not in crawled and link not in to_crawl:
      to_crawl.append(link)

  for phone in phones:
    phones_found.add(phone)

print phones_found

